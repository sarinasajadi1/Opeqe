{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\sarin\\\\burger-builder\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\sarin\\\\burger-builder\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\sarin\\\\burger-builder\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"C:\\\\Users\\\\sarin\\\\burger-builder\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"C:\\\\Users\\\\sarin\\\\burger-builder\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"C:\\\\Users\\\\sarin\\\\burger-builder\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import Aux from'../../hoc/Auxilary/Aux';import Burger from'../../components/Burger/Burger';import BuildControls from'../../components/Burger/BuildControls/BuildControls';import Modal from'../../components/UI/Modal/Modal';import OrderSummary from'../../components/Burger/OrderSummary/OrderSummary';import axios from'../../axios-orders';import Spinner from'../../components/UI/Spinner/Spinner';import withErrorHandler from'../../hoc/withErrorHandler/withErrorHandler';import*as actions from'../../store/actions/index';// const INGREDIENT_PRICES = {\n//     salad: 0.7,\n//     bacon: 1.5,\n//     cheese: 1,\n//     meat: 2\n// }\nvar BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);function BurgerBuilder(){var _getPrototypeOf2;var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(BurgerBuilder)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={purchasing:false};_this.purchaseHandler=function(){if(_this.props.isAuthenticated){_this.setState({purchasing:true});}else{_this.props.onSetAuthRedirectPath('/checkout');_this.props.history.push('/auth');}};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){_this.props.onInitPurchase();_this.props.history.push('/checkout');};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onInitIngredients();}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);return sum>0;}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.props.ings);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}var orderSummary=null;var burger=this.props.error?React.createElement(\"p\",null,\"Ingredients can't be loaded! Please make sure you are connected to a\",React.createElement(\"strong\",{style:{color:'red'}},\" VPN\")):React.createElement(Spinner,null);if(this.props.ings){burger=React.createElement(Aux,null,\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \",React.createElement(Burger,{ingredients:this.props.ings}),\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \",React.createElement(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disabledInfo,purchasable:this.updatePurchaseState(this.props.ings),ordered:this.purchaseHandler,isAuth:this.props.isAuthenticated,price:this.props.price}),\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \");orderSummary=React.createElement(OrderSummary,{ingredients:this.props.ings,price:this.props.price,purchaseCancelled:this.purchaseCancelHandler,purchaseContinued:this.purchaseContinueHandler});}// {salad: true, meat: false, ...}\nreturn React.createElement(Aux,null,\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \",React.createElement(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler},\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \",orderSummary,\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"),\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \",burger,\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \");}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ings:state.burgerBuilder.ingredients,price:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,isAuthenticated:state.auth.token!==null};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(ingName){return dispatch(actions.addIngredient(ingName));},onIngredientRemoved:function onIngredientRemoved(ingName){return dispatch(actions.removeIngredient(ingName));},onInitIngredients:function onInitIngredients(){return dispatch(actions.initIngredients());},onInitPurchase:function onInitPurchase(){return dispatch(actions.purchaseInit());},onSetAuthRedirectPath:function onSetAuthRedirectPath(path){return dispatch(actions.setAuthRedirectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["C:/Users/sarin/burger-builder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","OrderSummary","axios","Spinner","withErrorHandler","actions","BurgerBuilder","state","purchasing","purchaseHandler","props","isAuthenticated","setState","onSetAuthRedirectPath","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchase","onInitIngredients","ingredients","sum","Object","keys","map","igKey","reduce","el","disabledInfo","ings","key","orderSummary","burger","error","color","onIngredientAdded","onIngredientRemoved","updatePurchaseState","price","mapStateToProps","burgerBuilder","totalPrice","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredients","purchaseInit","path","setAuthRedirectPath"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Aux from '../../hoc/Auxilary/Aux'\r\nimport Burger from '../../components/Burger/Burger'\r\nimport BuildControls from '../../components/Burger/BuildControls/BuildControls'\r\nimport Modal from '../../components/UI/Modal/Modal'\r\nimport OrderSummary from '../../components/Burger/OrderSummary/OrderSummary'\r\nimport axios from '../../axios-orders';\r\nimport Spinner from '../../components/UI/Spinner/Spinner';\r\nimport withErrorHandler from '../../hoc/withErrorHandler/withErrorHandler';\r\nimport * as actions from '../../store/actions/index'\r\n\r\n// const INGREDIENT_PRICES = {\r\n//     salad: 0.7,\r\n//     bacon: 1.5,\r\n//     cheese: 1,\r\n//     meat: 2\r\n// }\r\n\r\nclass BurgerBuilder extends Component{\r\n    // constructor(props) {\r\n            //     super(props);\r\n            //     this.state = {...}\r\n            // }\r\n            state = {\r\n                purchasing: false\r\n            }\r\n        \r\n            componentDidMount () {\r\n                this.props.onInitIngredients();\r\n            }\r\n        \r\n            updatePurchaseState ( ingredients ) {\r\n                const sum = Object.keys( ingredients )\r\n                    .map( igKey => {\r\n                        return ingredients[igKey];\r\n                    } )\r\n                    .reduce( ( sum, el ) => {\r\n                        return sum + el;\r\n                    }, 0 );\r\n                return sum > 0;\r\n            }\r\n        \r\n            purchaseHandler = () => {\r\n                if (this.props.isAuthenticated) {\r\n                    this.setState( { purchasing: true } );\r\n                } else {\r\n                    this.props.onSetAuthRedirectPath('/checkout');\r\n                    this.props.history.push('/auth');\r\n                }\r\n            }\r\n        \r\n            purchaseCancelHandler = () => {\r\n                this.setState( { purchasing: false } );\r\n            }\r\n        \r\n            purchaseContinueHandler = () => {\r\n                this.props.onInitPurchase();\r\n                this.props.history.push('/checkout');\r\n            }\r\n        \r\n            render () {\r\n                const disabledInfo = {\r\n                    ...this.props.ings\r\n                };\r\n                for ( let key in disabledInfo ) {\r\n                    disabledInfo[key] = disabledInfo[key] <= 0\r\n                }\r\n                let orderSummary = null;\r\n                let burger = this.props.error ? <p>Ingredients can't be loaded! Please make sure you are connected to a \r\n            <strong style={{color: 'red'}}> VPN</strong></p> : <Spinner />;\r\n        \r\n                if ( this.props.ings ) {\r\n                    burger = (\r\n                        <Aux>\r\n                            <Burger ingredients={this.props.ings} />\r\n                            <BuildControls\r\n                                ingredientAdded={this.props.onIngredientAdded}\r\n                                ingredientRemoved={this.props.onIngredientRemoved}\r\n                                disabled={disabledInfo}\r\n                                purchasable={this.updatePurchaseState(this.props.ings)}\r\n                                ordered={this.purchaseHandler}\r\n                                isAuth={this.props.isAuthenticated}\r\n                                price={this.props.price} />\r\n                        </Aux>\r\n                    );\r\n                    orderSummary = <OrderSummary\r\n                        ingredients={this.props.ings}\r\n                        price={this.props.price}\r\n                        purchaseCancelled={this.purchaseCancelHandler}\r\n                        purchaseContinued={this.purchaseContinueHandler} />;\r\n                }\r\n                // {salad: true, meat: false, ...}\r\n                return (\r\n                    <Aux>\r\n                        <Modal show={this.state.purchasing} modalClosed={this.purchaseCancelHandler}>\r\n                            {orderSummary}\r\n                        </Modal>\r\n                        {burger}\r\n                    </Aux>\r\n                );\r\n            }\r\n        }\r\n        \r\n        const mapStateToProps = state => {\r\n            return {\r\n                ings: state.burgerBuilder.ingredients,\r\n                price: state.burgerBuilder.totalPrice,\r\n                error: state.burgerBuilder.error,\r\n                isAuthenticated: state.auth.token !== null\r\n            };\r\n        }\r\n        \r\n        const mapDispatchToProps = dispatch => {\r\n            return {\r\n                onIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\r\n                onIngredientRemoved: (ingName) => dispatch(actions.removeIngredient(ingName)),\r\n                onInitIngredients: () => dispatch(actions.initIngredients()),\r\n                onInitPurchase: () => dispatch(actions.purchaseInit()),\r\n                onSetAuthRedirectPath: (path) => dispatch(actions.setAuthRedirectPath(path))\r\n            }\r\n        }\r\n        \r\n        export default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler( BurgerBuilder, axios ));"]},"metadata":{},"sourceType":"module"}